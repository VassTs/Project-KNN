# Project-KNN (2o Παραδοτέο)

Θεοδοσία Παπαδήμα 1115202000162  sdi2000162@di.uoa.gr

Γιώργος Κορύλλος 1115202100069  sdi2100069@di.uoa.gr

Βασιλική Τσαντήλα 1115201800199  sdi1800199@di.uoa.gr

### Οδηγίες εκτέλεσης
Για την συγκεκριμένη εφαρμογή έχουν υλοποιηθεί οι εξής main:
Όσον αφορά τον filteredVamana:
* filtered_main: Φορτώνει τη βάση και κάνει όλους τους υπολογισμούς (FilteredVamana, queries).
* filtered_main_graph: Φορτώνει τη βάση και κάνει το κομμάτι του FilteredVamana, αποθηκεύοντας τον γράφο σε .bin αρχείο.
* config_filtered_main: Ίδια με την filtered_main αλλά τρέχει με configuration file για τις παραμέτρους.

Αντίστοιχα, για τον stitchedVamana:
* stitched_main
* stitched_main_graph
config_stitched_main
Που κάνουν τις ίδιες λειτουργίες.

Όπως επίσης και μια γενική
* main_load: Παίρνει τον γράφο από το .bin αρχείο και κάνει τους υπολογισμούς για τα queries.

Για να τρέξετε την εκάστοτε main:
Επιλογή 1:
* Μεταφέρεστε στο directory που βρίσκεται το Makefile.
* Εκτελείτε την εντολή: make
* Εκτελείτε την εντολή: chmod +x run_<όνομα της main>.sh
* Εκτελείτε την εντολή: ./run_<όνομα της main>.sh

Επιλογή 2:
Μέσω των configuration files και τρέχετε τις config_filtered_main, config_stitched_main με είσοδο το αντίστοιχο CF.

Για να τρέξετε τα test:
* Μεταφέρεστε στο directory που βρίσκεται το Makefile.
* Εκτελείτε την εντολή: make test
* Εκτελείτε την εντολή: ./bin/test

Με την εντολή make valgrind τρέχει το valgrind για τα test.

Για να καθαρίσετε τα αντικείμενα και εκτελέσιμα αρχεία:
* Στο directory που βρίσκεται το Makefile, εκτελείτε την εντολή: make clean

### Διαχωρισμός εργασιών


### Σχεδιαστικές επιλογές

* Λόγω της παραλλαγής του ενός label ανά κόμβο, η υλοποίηση ήταν απλούστερη από τον ψευδοκώδικα.
Για τις συναρτήσεις του filteredVamana και FindMedoid, υπάρχει λειτουργική υλοποίηση σύμφωνα αυστηρά με τον ψευδοκώδικα σε σχόλιο,
και απλοποιημένη υλοποίηση (εκτός σχόλιου), η οποία είναι ταχύτερη.

Πιο συγκεκριμένα, οι αλλαγές αφορούν ......................................

* Το αρχείο graph_binary_io.pp περιέχει τις συναρτήσεις αποθήκευσης σε αρχείο binary και φόρτισης από αυτό του γράφου και του map που περιέχει τα medoid από αρχείο binary. 
* Η save_graph_to_binary αποθηκεύει τον γράφο με την ακόλουθη μορφή:
- number of nodes N
- For each node:
	- Node ID
	- Node's Graph ID (int)
	- Coordinates 
    - Label
	- Number of neighbors M
	- IDs of neighbors

Δηλαδή, αποθηκεύοντας πρώτα τον αριθμό των κόμβων και ύστερα, για κάθε κόμβο, το ID του, την ετικέτα, τις συντεταγμένες, τον αριθμό των γειτόνων του και τα ID των γειτόνων.

* Η load_graph_from_binary διαβάζει αυτά τα δεδομένα από το .bin αρχείο που έχει δημιουργήσει η save_graph_to_binary και κάνει την αντίστοιχη απαιτούμενη ενέργεια ώστε να δημιουργήσει τον γράφο (δηλαδή, δημιουργεί τον κόμβο και τους γειτονικούς κόμβους και τους συνδέει).

* Η save_map_to_binary αποθηκεύει το map με την ακόλουθη μορφή:
 - number of nodes in M
 - For each node:
    - Label, Node ID

* H load_map_from_binary με παρόμοιο τρόπο όπως με τον γράφο επιστρέφει το map.



### Αποτελέσματα & Χρόνοι (Παραδείγματα)


Δεν υπάρχουν διαρροές μνήμης.